{% extends "base.html" %}

{% block title %}Results — {{ q }}{% endblock %}

{% block content %}
  <div class="row justify-content-center">
    <div class="col-lg-10">

      <form class="d-flex gap-2 mb-3" method="get" action="/search">
        <input name="q" class="form-control" value="{{ q }}" placeholder="Введите запрос" />
        <button class="btn btn-primary" type="submit">Искать</button>
        <a class="btn btn-outline-secondary" href="/">На главную</a>
      </form>

      {% if not q %}
        <div class="alert alert-info">Введите запрос для поиска.</div>
      {% else %}
        <div class="d-flex justify-content-between align-items-center mb-2">
          <h2 class="h5 mb-0">Результаты по: <span class="badge text-bg-light">{{ q }}</span></h2>
          <span class="text-muted">Найдено: {{ count }}</span>
        </div>

        {% if count == 0 %}
          <div class="alert alert-warning">Ничего не найдено.</div>
        {% else %}
          <div class="list-group">
            {% for e in results %}
              <a class="list-group-item list-group-item-action" href="/entry/{{ e.id }}">
                <div class="d-flex w-100 justify-content-between">
                  <h5 class="mb-1">{{ e.hanzi }}</h5>
                  <small class="text-muted">#{{ e.id }}</small>
                </div>
                <div class="mb-1">
                  {% if e.pinyin %}
                    <span class="text-muted">{{ e.pinyin }}</span>
                    {% if e.pos %}<span class="text-muted">• {{ e.pos }}</span>{% endif %}
                  {% elif e.pos %}
                    <span class="text-muted">{{ e.pos }}</span>
                  {% endif %}
                </div>
                <div class="text-body">{{ e.ru }}</div>
              </a>
            {% endfor %}
          </div>
        {% endif %}
      {% endif %}
    </div>
  </div>
{% endblock %}
